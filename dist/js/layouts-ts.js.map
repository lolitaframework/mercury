{"version":3,"sources":["l-header.ts"],"names":["LolitaFramework","Layouts","Header","_super","blockName","_this","this","call","logo","block","find","mainMenu","search","jQuery","on","openSearch","closeSearch","init","__extends","prototype","hide","mbSearch","mbMenu","show","currentDeviceType","name","toggleMbMenu","toggle","onBreakpointChange","breakpoint","each","index","item","curentItem","length","searchButton","append","menuButton","remove","MediaBreakpoints","header"],"mappings":"yMAGUA,iBAAV,SAAUA,GAAgB,GAAAC,IAAA,SAAAA,GACzB,GAAAC,GAAA,SAAAC,GAoCC,QAAAD,GAAYE,GApCb,GAAAC,GAAAC,IAqCEH,GAAAI,KAAAD,KAAMF,GAENE,KAAKE,KAAWF,KAAKG,MAAMC,KAAK,8BAChCJ,KAAKK,SAAWL,KAAKG,MAAMC,KAAK,mCAChCJ,KAAKM,OAAWN,KAAKG,MAAMC,KAAK,gCAEhCG,OAAO,QAAQC,GAAG,mCAAoC,WAAQT,EAAKU,eACnEF,OAAO,QAAQC,GAAG,yBAA0B,WAAQT,EAAKW,gBAEzDV,KAAKW,OA8EP,MA5H4BC,WAAAhB,EAAAC,GAoDpBD,EAAAiB,UAAAJ,WAAP,WACCT,KAAKE,KAAKY,OACVd,KAAKK,SAASS,OACdd,KAAKe,SAASD,OACdd,KAAKgB,OAAOF,OACZd,KAAKM,OAAOW,QAMNrB,EAAAiB,UAAAH,YAAP,WACoC,MAA/BV,KAAKkB,kBAAkBC,MACK,MAA/BnB,KAAKkB,kBAAkBC,MACvBnB,KAAKE,KAAKe,OACVjB,KAAKe,SAASE,OACdjB,KAAKgB,OAAOC,OACZjB,KAAKM,OAAOQ,SAEZd,KAAKE,KAAKe,OACVjB,KAAKK,SAASY,OACdjB,KAAKe,SAASD,OACdd,KAAKgB,OAAOF,OACZd,KAAKM,OAAOQ,SAOPlB,EAAAiB,UAAAO,aAAP,WACCpB,KAAKK,SAASgB,UAOCzB,EAAAiB,UAAAS,mBAAV,SAA6BC,GAA7B,GAAAxB,GAAAC,IAC2B,OAAnBuB,EAAWJ,MAAmC,MAAnBI,EAAWJ,MACtCnB,KAAKG,MAAMqB,KACP,SAACC,EAAOC,GACJ,GAAIC,GAAapB,OAAOmB,GAAMtB,KAAK,8BAEnC,KAAKuB,EAAWvB,KAAK,6BAA6BwB,OAAQ,CACtD,GAAIC,GAAetB,OAAO,uDAC1BsB,GAAarB,GAAG,QAAS,WAAQT,EAAKU,eACtCkB,EAAWG,OAAOD,GAItB,IAAKF,EAAWvB,KAAK,2BAA2BwB,OAAQ,CACpD,GAAIG,GAAaxB,OAAO,mDACxBwB,GAAWvB,GAAG,QAAS,WAAQT,EAAKqB,iBACpCO,EAAWG,OAAOC,MAK9B/B,KAAKK,SAASS,QAEdd,KAAKG,MAAMqB,KACP,SAACC,EAAOC,GACJ,GAAIC,GAAapB,OAAOmB,EACxBC,GAAWvB,KAAK,6BAA6B4B,SAC7CL,EAAWvB,KAAK,2BAA2B4B,WAIhEhC,KAAKe,SAAaf,KAAKG,MAAMC,KAAK,6BAClCJ,KAAKgB,OAAWhB,KAAKG,MAAMC,KAAK,4BAElCR,GA5H4BF,EAAgBuC,iBAA/BtC,GAAAC,OAAMA,EA8HRD,EAAAuC,OAAS,GAAItC,GAAO,cA/HND,EAAAD,EAAAC,UAAAD,EAAAC,cAAhBD,kBAAAA","file":"layouts-ts.js","sourcesContent":["/// <reference path='../../../general/def/jquery.d.ts' />\n/// <reference path='../../../general/ts/core.ts' />\n\nnamespace LolitaFramework.Layouts {\n\texport class Header extends LolitaFramework.MediaBreakpoints {\n\t\t\n\t\t/**\n\t\t * Logo object\n\t\t * @type {JQuery}\n\t\t */\n\t\tprivate logo: JQuery;\n\n\t\t/**\n\t\t * Main menu object\n\t\t * @type {JQuery}\n\t\t */\n\t\tprivate mainMenu: JQuery;\n\t\t\n\t\t/**\n\t\t * Search panel object\n\t\t * @type {JQuery}\n\t\t */\n\t\tprivate search: JQuery;\n\n\t\t/**\n\t\t * Search panel object\n\t\t * @type {JQuery}\n\t\t */\n\t\t\n\t\tprivate mbSearch: JQuery;\n\t\t/**\n\t\t * Search panel object\n\t\t * @type {JQuery}\n\t\t */\n\t\tprivate mbMenu: JQuery;\n\n\t\t/**\n\t\t * Constructor\n\t\t * @param {string} blockName - name of the block\n\t\t */\n\t\tconstructor(blockName: string) {\n\t\t\tsuper(blockName);\n\t\t\t\n\t\t\tthis.logo     = this.block.find('.b-logo.l-header__top-item');\n\t\t\tthis.mainMenu = this.block.find('.b-main-menu.l-header__top-item');\n\t\t\tthis.search   = this.block.find('.b-search.l-header__top-item');\n\n\t\t\tjQuery('body').on('b-main-menu__link--search::click', () => { this.openSearch() });\n\t\t\tjQuery('body').on('b-search__close::click', () => { this.closeSearch() });\n\n\t\t\tthis.init();\n\t\t}\n\n\t\t/**\n\t\t * Open Search panel\n\t\t */\n\t\tpublic openSearch() {\n\t\t\tthis.logo.hide();\n\t\t\tthis.mainMenu.hide();\n\t\t\tthis.mbSearch.hide();\n\t\t\tthis.mbMenu.hide();\n\t\t\tthis.search.show();\n\t\t}\n\n\t\t/**\n\t\t * Close Search panel\n\t\t */\n\t\tpublic closeSearch() {\n\t\t\tif (this.currentDeviceType.name == 'sm' ||\n\t\t\t\tthis.currentDeviceType.name == 'md') {\n\t\t\t\tthis.logo.show();\n\t\t\t\tthis.mbSearch.show();\n\t\t\t\tthis.mbMenu.show();\n\t\t\t\tthis.search.hide();\n\t\t\t} else {\n\t\t\t\tthis.logo.show();\n\t\t\t\tthis.mainMenu.show();\n\t\t\t\tthis.mbSearch.hide();\n\t\t\t\tthis.mbMenu.hide();\n\t\t\t\tthis.search.hide();\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Open MB Menu\n\t\t */\n\t\tpublic toggleMbMenu() {\n\t\t\tthis.mainMenu.toggle();\n\t\t}\n\n        /**\n         * Add buttons for mobiles and tablets\n         * @param {Breakpoint} breakpoint [description]\n         */\n        protected onBreakpointChange(breakpoint: Breakpoint) {\n            if (breakpoint.name == 'sm' || breakpoint.name == 'md') {\n                this.block.each(\n                    (index, item) => {\n                        let curentItem = jQuery(item).find('.l-header__top > .container');\n\n                        if (!curentItem.find('.l-header__top__mb-search').length) {\n                            let searchButton = jQuery('<span class=\"l-header__top__mb-search\">Search</span>');\n                            searchButton.on('click', () => { this.openSearch() });\n                            curentItem.append(searchButton);\n                        }\n                        \n                        \n                        if (!curentItem.find('.l-header__top__mb-menu').length) {\n                            let menuButton = jQuery('<span class=\"l-header__top__mb-menu\">Menu</span>');\n                            menuButton.on('click', () => { this.toggleMbMenu() });\n                            curentItem.append(menuButton);\n                        }\n                        \n                    }\n                );\n                this.mainMenu.hide();\n            } else {\n                this.block.each(\n                    (index, item) => {\n                        let curentItem = jQuery(item);\n                        curentItem.find('.l-header__top__mb-search').remove();\n                        curentItem.find('.l-header__top__mb-menu').remove();\n                    }\n                );\n            }\n\t\t\tthis.mbSearch   = this.block.find('.l-header__top__mb-search');\n\t\t\tthis.mbMenu   = this.block.find('.l-header__top__mb-menu');\n        }\n\t}\n\n\texport let header = new Header('.l-header');\n}"],"sourceRoot":"/source/"}