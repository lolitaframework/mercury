{"version":3,"sources":["l-header.ts"],"names":["LolitaFramework","Layouts","Header","_super","blockName","_this","this","call","logo","block","find","mainMenu","search","jQuery","on","openSearch","closeSearch","init","__extends","prototype","hide","mbSearch","mbMenu","show","currentDeviceType","name","toggleMbMenu","toggle","onBreakpointChange","breakpoint","each","index","item","curentItem","length","searchButton","append","menuButton","event","currentTarget","toggleClass","remove","MediaBreakpoints","header"],"mappings":"yMAGUA,iBAAV,SAAUA,GAAgB,GAAAC,IAAA,SAAAA,GACtB,GAAAC,GAAA,SAAAC,GAoCI,QAAAD,GAAYE,GApChB,GAAAC,GAAAC,IAqCQH,GAAAI,KAAAD,KAAMF,GAENE,KAAKE,KAAOF,KAAKG,MAAMC,KAAK,8BAC5BJ,KAAKK,SAAWL,KAAKG,MAAMC,KAAK,mCAChCJ,KAAKM,OAASN,KAAKG,MAAMC,KAAK,gCAE9BG,OAAO,QAAQC,GAAG,mCAAoC,WAClDT,EAAKU,eAETF,OAAO,QAAQC,GAAG,yBAA0B,WACxCT,EAAKW,gBAGTV,KAAKW,OAqFb,MAvI4BC,WAAAhB,EAAAC,GAwDjBD,EAAAiB,UAAAJ,WAAP,WACIT,KAAKE,KAAKY,OACVd,KAAKK,SAASS,OACdd,KAAKe,SAASD,OACdd,KAAKgB,OAAOF,OACZd,KAAKM,OAAOW,QAMTrB,EAAAiB,UAAAH,YAAP,WACuC,MAA/BV,KAAKkB,kBAAkBC,MACQ,MAA/BnB,KAAKkB,kBAAkBC,MACvBnB,KAAKE,KAAKe,OACVjB,KAAKe,SAASE,OACdjB,KAAKgB,OAAOC,OACZjB,KAAKM,OAAOQ,SAEZd,KAAKE,KAAKe,OACVjB,KAAKK,SAASY,OACdjB,KAAKe,SAASD,OACdd,KAAKgB,OAAOF,OACZd,KAAKM,OAAOQ,SAOblB,EAAAiB,UAAAO,aAAP,WACIpB,KAAKK,SAASgB,UAORzB,EAAAiB,UAAAS,mBAAV,SAA6BC,GAA7B,GAAAxB,GAAAC,IAC2B,OAAnBuB,EAAWJ,MAAmC,MAAnBI,EAAWJ,MACtCnB,KAAKG,MAAMqB,KACP,SAACC,EAAOC,GACJ,GAAIC,GAAapB,OAAOmB,GAAMtB,KAAK,8BAEnC,KAAKuB,EAAWvB,KAAK,6BAA6BwB,OAAQ,CACtD,GAAIC,GAAetB,OAAO,uDAC1BsB,GAAarB,GAAG,QAAS,WACrBT,EAAKU,eAETkB,EAAWG,OAAOD,GAItB,IAAKF,EAAWvB,KAAK,2BAA2BwB,OAAQ,CACpD,GAAIG,GAAaxB,OAAO,mDACxBwB,GAAWvB,GAAG,QACV,SAACwB,GACGzB,OAAOyB,EAAMC,eAAeC,YAAY,kCACxCnC,EAAKqB,iBAGbO,EAAWG,OAAOC,MAK9B/B,KAAKK,SAASS,QAEdd,KAAKG,MAAMqB,KACP,SAACC,EAAOC,GACJ,GAAIC,GAAapB,OAAOmB,EACxBC,GAAWvB,KAAK,6BAA6B+B,SAC7CR,EAAWvB,KAAK,2BAA2B+B,WAIvDnC,KAAKe,SAAWf,KAAKG,MAAMC,KAAK,6BAChCJ,KAAKgB,OAAShB,KAAKG,MAAMC,KAAK,4BAEtCR,GAvI4BF,EAAgB0C,iBAA/BzC,GAAAC,OAAMA,EAyIRD,EAAA0C,OAAS,GAAIzC,GAAO,cA1ITD,EAAAD,EAAAC,UAAAD,EAAAC,cAAhBD,kBAAAA","file":"layouts-ts.js","sourcesContent":["/// <reference path='../../../general/def/jquery.d.ts' />\n/// <reference path='../../../general/ts/core.ts' />\n\nnamespace LolitaFramework.Layouts {\n    export class Header extends LolitaFramework.MediaBreakpoints {\n\n        /**\n         * Logo object\n         * @type {JQuery}\n         */\n        private logo: JQuery;\n\n        /**\n         * Main menu object\n         * @type {JQuery}\n         */\n        private mainMenu: JQuery;\n\n        /**\n         * Search panel object\n         * @type {JQuery}\n         */\n        private search: JQuery;\n\n        /**\n         * Search panel object\n         * @type {JQuery}\n         */\n\n        private mbSearch: JQuery;\n        /**\n         * Search panel object\n         * @type {JQuery}\n         */\n        private mbMenu: JQuery;\n\n        /**\n         * Constructor\n         * @param {string} blockName - name of the block\n         */\n        constructor(blockName: string) {\n            super(blockName);\n\n            this.logo = this.block.find('.b-logo.l-header__top-item');\n            this.mainMenu = this.block.find('.b-main-menu.l-header__top-item');\n            this.search = this.block.find('.b-search.l-header__top-item');\n\n            jQuery('body').on('b-main-menu__link--search::click', () => {\n                this.openSearch()\n            });\n            jQuery('body').on('b-search__close::click', () => {\n                this.closeSearch()\n            });\n\n            this.init();\n        }\n\n        /**\n         * Open Search panel\n         */\n        public openSearch() {\n            this.logo.hide();\n            this.mainMenu.hide();\n            this.mbSearch.hide();\n            this.mbMenu.hide();\n            this.search.show();\n        }\n\n        /**\n         * Close Search panel\n         */\n        public closeSearch() {\n            if (this.currentDeviceType.name == 'sm' ||\n                this.currentDeviceType.name == 'md') {\n                this.logo.show();\n                this.mbSearch.show();\n                this.mbMenu.show();\n                this.search.hide();\n            } else {\n                this.logo.show();\n                this.mainMenu.show();\n                this.mbSearch.hide();\n                this.mbMenu.hide();\n                this.search.hide();\n            }\n        }\n\n        /**\n         * Open MB Menu\n         */\n        public toggleMbMenu() {\n            this.mainMenu.toggle();\n        }\n\n        /**\n         * Add buttons for mobiles and tablets\n         * @param {Breakpoint} breakpoint [description]\n         */\n        protected onBreakpointChange(breakpoint: Breakpoint) {\n            if (breakpoint.name == 'sm' || breakpoint.name == 'md') {\n                this.block.each(\n                    (index, item) => {\n                        let curentItem = jQuery(item).find('.l-header__top > .container');\n\n                        if (!curentItem.find('.l-header__top__mb-search').length) {\n                            let searchButton = jQuery('<span class=\"l-header__top__mb-search\">Search</span>');\n                            searchButton.on('click', () => {\n                                this.openSearch()\n                            });\n                            curentItem.append(searchButton);\n                        }\n\n\n                        if (!curentItem.find('.l-header__top__mb-menu').length) {\n                            let menuButton = jQuery('<span class=\"l-header__top__mb-menu\">Menu</span>');\n                            menuButton.on('click',\n                                (event) => {\n                                    jQuery(event.currentTarget).toggleClass('l-header__top__mb-menu--opened');\n                                    this.toggleMbMenu()\n                                }\n                            );\n                            curentItem.append(menuButton);\n                        }\n\n                    }\n                );\n                this.mainMenu.hide();\n            } else {\n                this.block.each(\n                    (index, item) => {\n                        let curentItem = jQuery(item);\n                        curentItem.find('.l-header__top__mb-search').remove();\n                        curentItem.find('.l-header__top__mb-menu').remove();\n                    }\n                );\n            }\n            this.mbSearch = this.block.find('.l-header__top__mb-search');\n            this.mbMenu = this.block.find('.l-header__top__mb-menu');\n        }\n    }\n\n    export let header = new Header('.l-header');\n}"],"sourceRoot":"/source/"}